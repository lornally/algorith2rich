# 线性规划linear program

## 单纯型 simplex

### pivot 主元

- 换元操作
- 限制条件的剩余库存和产量互换
  - 利润z=10a+5b+15c
  - 剩余n=100-3a-3b-c
  - 剩余s=200-4a-2b-8c
    - abc为不同产品的产量
    - ns为不同原料的剩余库存
- 最终让z=T-yb-zn-xs
  - xyz均为正系数
  - T为常数
- 疑问: 
  - 如果第一步换元选择了b, 那么a和c会总是正值
  - 第二步换a时, 就会把b换掉, 因为紧约束还在b这个式子

### 对偶式

- 这个式子乘系数
  - 定义p=x*(3a+3b+c<=100)
  - 定义q=y*(4a+2b+8c<=200)
  - p+q凑出紧约束
  - 10a+zb+15c<=450
  - z是一个放大的系数, 因为b并没有紧约束, 他的产量为零
- 对偶式
  - 利润: z=100x+200y
  - 系数约束
    - a的系数约束: 3x+4y>=10
    - b的: 5x+2y>=5
    - c的: x+8y>=15

  - 系数约束是说单位产量的利润系数, 
    - 必须大于等于这个数字, 才能证明利润确实是极限值: 10a+zb+15c<=450

### tsp

###### 正向构造

- 目标: 求Σx(a, i)*c(a,i)最小, 
  - a, i都是从1到n
  - x代表是否使用这条边
  - c代表边上的权重, 也就是某条边的距离
- 条件: Σx(a,i)=2
  - x代表连接某个端点的所有边, 连接为1, 不使用为零
  - a代表某个断点
  - i从1到n,  其他的n个点

$$
优化目标:z(最小值)= \sum_{a,i=1}^{n}{x_{ai}c_{ai}}

\\其中, x_{ai}=\begin{cases}
0, ai路线没有被选中
\\1, ai路线被选中了
\end{cases}
\\c_{ai}, 代表ai路线的长度, 类似之前的生产活动的强度系数
$$

$$
限制条件: \sum_{i=1}^nx_{ai}=2, 
\\其中: a= \forall正整数
\\ai代表a点到i点的路径
$$

> 这个线性规划和之前的区别在于, 之前的a, b, c, 都是正实数, 这里x一定是0或者1

###### 对偶问题

$$
优化目标:z(最大值)= \sum_{i=1}^{n}{2r_{i}}
\\这个最大值是tsp解的最小可能性
\\限制条件: r_1+r_2=c_{12}
$$

###### 子路径约束

> 把整个tsp的所有点分成两部分, 两部分点之间的通路也是2, 一来一回, 此处是一个2部图
> (点集一) 到 (剩余的点) 之间一定至少有2条路, 往返

$$
\sum_{a\in A, i\in\overline A}{x_{ai}}\geq2
\\此时A为任意点集
$$

